{% extends 'base.html' %}

{% load static %}

{% block content %}

<link href="{% static 'field_plot/style.css' %}" rel="stylesheet" type="text/css" />

<div id="container">
	<div id="plot-controller">
		<div id="plot-parameters" class="pane-frame">
			<form id="form-plot" class="plot-parameters-form">
				<!-- TOP ROW (Ra/dec, size, resolution -->
				<div class="plot-parameters-form-region">
					<label for="fname">Region</label>
					<div class="form-controls-area">
						<div class="plot-parameters-form-region-row">
							<div class="plot-parameters-textbox-large"><label for="formfield_ra" class="text-label">RA</label><br>
								<input type="text" id="formfield_ra" name="formfield_ra"><br></div>
							<div class="plot-parameters-textbox-large"><label for="formfield_dec" class="text-label">Dec</label><br>
								<input type="text" id="formfield_dec" name="formfield_dec"><br></div>
						</div>
						<div class="plot-parameters-form-region-row">
							<div class="plot-parameters-textbox-large"><label for="formfield_size" class="text-label">Angular size</label><br>
								<input type="text" id="formfield_size" name="formfield_size" value=""><br></div>
						</div>
					</div>
				</div>
				<div class="plot-parameters-form-frequency">
					<label for="fname">Frequency</label>
					<div class="form-controls-area">
						<div class="plot-parameters-form-frequency-bands">
							<div class="plot-parameters-form-frequency-bands-row">
								<div class="plot-parameters-checkbutton">
									<input type="checkbox" id="formfield_band3" name="formfield_band3" value="Band 3">
									<label for="formfield_band3" class="text-label">Band 3</label><br></div>
								<div class="plot-parameters-checkbutton">
									<input type="checkbox" id="formfield_band4" name="formfield_band4" value="Band 4">
									<label for="formfield_band4" class="text-label">Band 4</label><br></div>
								<div class="plot-parameters-checkbutton">
									<input type="checkbox" id="formfield_band5" name="formfield_band5" value="Band 5">
									<label for="formfield_band5" class="text-label">Band 5</label><br></div>
								<div class="plot-parameters-checkbutton">
									<input type="checkbox" id="formfield_band6" name="formfield_band6" value="Band 6">
									<label for="formfield_band6" class="text-label">Band 6</label><br></div>
							</div>
							<div class="plot-parameters-form-frequency-bands-row">
								<div class="plot-parameters-checkbutton">
									<input type="checkbox" id="formfield_band7" name="formfield_band7" value="Band 7">
									<label for="formfield_band7" class="text-label">Band 7</label><br></div>
								<div class="plot-parameters-checkbutton">
									<input type="checkbox" id="formfield_band8" name="formfield_band8" value="Band 8">
									<label for="formfield_band8" class="text-label">Band 8</label><br></div>
								<div class="plot-parameters-checkbutton">
									<input type="checkbox" id="formfield_band9" name="formfield_band9" value="Band 9">
									<label for="formfield_band9" class="text-label">Band 9</label><br></div>
								<div class="plot-parameters-checkbutton">
									<input type="checkbox" id="formfield_band10" name="formfield_band10" value="Band 10">
									<label for="formfield_band10" class="text-label">Band 10</label><br></div>
							</div>
						</div>
						<br>
						<div class="plot-parameters-form-frequency-redshift">
							<label for="coiso" class="text-label">Redshift</label>
							<div class="plot-parameters-form-frequency-redshift-slider">
								<input type="range" id="formfield_redshift" min=0 max=12 value=0 step=0.1 class="zvalue">
								<div class="redshift-sym text-label">&zscr; =&nbsp;<div id="redshift-val">0.0</div></div> 
							</div>
						</div>
					</div>
				</div>
				<div class="sep-vertical"></div>
				<div class="plot-parameters-form-plot">
					<label for="formfield_res">Plot</label>
					<div class="form-controls-area">
						<div class="plot-parameters-textbox-large"><label for="formfield_res" class="text-label">Resolution</label><br>
							<input type="text" id="formfield_res" name="formfield_res"><br></div><br>
						<input type="submit" name="submit" class="submit-button" value="Render">
					</div>
				</div>
			</form>
		</div>
		<!-- ----------------------------------------------------------------- -->
		<div class="separator big"></div>
		
		<div id="plot-information">
			<div id="info-row">
				<div id="infotabs">
					<ul>
						<li><a href="#tab-plot-information">Plot information</a></li>
						<li><a href="#tab-frequency-coverage">Frequency support</a></li>
						<li><a href="#tab-gained-sensitivity">Gained sensitivity</a></li>
						<li><a href="#tab-emission-lines">Emission Lines</a></li>
					</ul>	
					<div id="tab-plot-information" class='pane-frame'></div>
					<div id="tab-frequency-coverage" class='pane-frame center'></div>
					<div id="tab-gained-sensitivity" class='pane-frame'></div>
					<div id="tab-emission-lines" class='pane-frame'></div>
				</div>
			</div>
			<div class="sep-horizontal-small"></div>
			<div id="observations-table">
				<div class="info-wrapper">
					<table id='obs_list' class='display compact' width='90%'>
						<thead>
							<tr>
								<th>Project code</th>
								<th>Source name</th>
								<th>RA</th>
								<th>Dec</th>
								<th>Total area</th>
								<th>Overlapping area</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>	
	</div>
	<div class="sep-vertical-plot"></div>
	<div id="plot">
		<script src="https://d3js.org/d3.v5.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
		<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
		<script type="module" src="{% static 'field_plot/plot.js' %}"></script>
		<script type="module" src="{% static 'field_plot/freq_histogram.js' %}"></script>
		<script type="module" src="{% static 'field_plot/controller.js' %}"></script>
		<div id="plot-controls">
			<select id="plot-color-property">
				<option value="count_pointings">Pointings count</option>
				<option value="avg_res">Average resolution</option>
				<option value="avg_sens">Average sensitivity (10km/s)</option>
				<option value="avg_int_time">Average integration time</option>
				<option value="snr">SNR improvement factor</option>
			</select>
			<div id="plot-axis">
				<svg id="plot-color-scale"></svg>
			</div>
			
		</div>
	</div>
</div>	

{% endblock content %}
